import{_ as c,c as r,b as n,o as l,r as k,n as N,h as $,p as I,w as D,a as x,i,v as b,q as g,f as C,d as V,l as E}from"./index-D2elhMP6.js";import{i as T,s as U,g as H,d as L}from"./theme-BVUP4eMr.js";const j={},R={width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"};function F(d,e){return l(),r("svg",R,e[0]||(e[0]=[n("path",{d:"M21 12H3M3 12L10 5M3 12L10 19",stroke:"#b3b3b3","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"},null,-1)]))}const A=c(j,[["render",F]]),O={},S={width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"};function Z(d,e){return l(),r("svg",S,e[0]||(e[0]=[n("path",{d:"M12 3V17M12 17L6 11M12 17L18 11M3 21H21",stroke:"#b3b3b3","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"},null,-1)]))}const q=c(O,[["render",Z]]),G={},z={width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"};function J(d,e){return l(),r("svg",z,e[0]||(e[0]=[n("path",{d:"M9 3H15M3 6H21M10 16V11M14 16V11M5 6H19L18.1245 19.133C18.0544 20.1836 17.1818 21 16.1289 21L7.8461 21C6.79171 21 5.91842 20.1814 5.85028 19.1292L5 6Z",stroke:"#b3b3b3","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"},null,-1)]))}const K=c(G,[["render",J]]),P={},Q={width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"};function W(d,e){return l(),r("svg",Q,e[0]||(e[0]=[n("path",{d:"M12 2L14.3607 9.26543H22L15.8197 13.7557L18.1803 21.0211L12 16.5309L5.81966 21.0211L8.18034 13.7557L2 9.26543H9.63932L12 2Z",stroke:"#b3b3b3","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"},null,-1)]))}const X=c(P,[["render",W]]),Y={key:0,class:"note"},tt={class:"note-container"},et={class:"note-header"},ot={class:"note-header-right"},nt={class:"control-item star-button",title:"Add to Favorite"},st={key:1,class:"hint"},rt={__name:"NoteView",emits:["noteDeleted","refreshNotes"],setup(d,{emit:e}){const v=e,m=N(),_=E(),f=k(parseInt(m.params.id)),t=k(null);let p=null;const w=async()=>{const s=await H();t.value=s.find(o=>o.id===f.value)||null};$(()=>{T(),w(),p=setInterval(()=>{t.value&&(t.value.title||t.value.content)&&U(t.value)},200)}),I(()=>{clearInterval(p)}),D(()=>m.params.id,s=>{f.value=parseInt(s),w()});const y=async()=>{if(t.value&&window.confirm("Are you sure you want to delete this record?"))try{clearInterval(p),await L(t.value.id),t.value=null,v("noteDeleted"),v("refreshNotes"),_.replace("/")}catch(o){console.error("Error deleting the note:",o),alert("Failed to delete the note.")}},B=()=>{if(!t.value)return;const s=`${(t.value.title||"Empty").toUpperCase()} | ${t.value.date}

${t.value.content||"Empty"}`,h=t.value.date.replace(/[.]/gi,"-"),a=new Blob([s],{type:"text/plain; charset=utf-8"}),u=document.createElement("a");u.href=URL.createObjectURL(a),u.download=`${h}.txt`,u.click(),URL.revokeObjectURL(u.href)},M=async()=>{if(t.value&&!t.value.title&&!t.value.content)try{await L(t.value.id)}catch(s){console.error("Error deleting empty note:",s)}_.replace("/"),v("refreshNotes")};return(s,o)=>{const h=V("router-link");return t.value?(l(),r("div",Y,[n("div",tt,[n("div",et,[n("button",{onClick:M,class:"control-item go-back-button",title:"Go Back"},[i(A)]),n("div",ot,[n("button",nt,[i(X)]),n("button",{class:"control-item export-button",type:"button",title:"Export",onClick:B},[i(q)]),n("button",{onClick:y,class:"control-item delete-button",title:"Delete"},[i(K)])])]),x(n("input",{"onUpdate:modelValue":o[0]||(o[0]=a=>t.value.title=a),placeholder:"Title",class:"note-input note-title",ref:"titleTextarea",type:"text",maxlength:"100"},null,512),[[b,t.value.title]]),x(n("textarea",{"onUpdate:modelValue":o[1]||(o[1]=a=>t.value.content=a),placeholder:"Tell a new story...",class:"note-input note-text",ref:"contentTextarea",maxlength:"30000"},null,512),[[b,t.value.content]])])])):(l(),r("div",st,[o[3]||(o[3]=g(" Note not found ")),i(h,{to:"/",class:"control-item"},{default:C(()=>o[2]||(o[2]=[g("Back to main page")])),_:1})]))}}},it=c(rt,[["__scopeId","data-v-e154ec84"]]);export{it as default};
